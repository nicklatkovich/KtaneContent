<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Черная Дыра — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-cyrillic.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src='js/ruleseed.js'></script>
    <script>
        function setRules(rnd) {
            // Add extra randomness
            for (var i = rnd.next(0, 10); i > 0; i--)
                rnd.nextDouble();

            var dots2 = 'M45 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z';
            var dots3 = 'M35 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z';
            var dots4 = 'M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z';

            var alternative = [
                { dots: dots4, gest: 'M30 70v10h20V70M70 70v10' },  // • └─•─┘ • | •
                { dots: dots3, gest: 'M40 70v10h20V70' },           // • └─•─┘ •
            ];
            var pool = rnd.shuffleArray([
                { dots: dots3, gest: 'M40 70v10m20-10v10' },                    // • | • | •
                { dots: dots4, gest: 'M52.5 70v10H70V70m-40 0v10h17.5V70' },    // • └─•─┘└─•─┘ •
                { dots: dots4, gest: 'M30 70v10M50 70v10h20V70' },              // • | •  └─•─┘ •
                { dots: dots4, gest: 'M30 70v10h40V70' },                       // • └─•──•─┘ •
                alternative[rnd.next(0, alternative.length)],
                { dots: dots4, gest: 'M30 70v10M70 70v10' },                    // • | •   • | •
            ]);

            for (var i = 0; i < 5; i++) {
                document.getElementById(`dots-${i}`).setAttribute('d', pool[i].dots);
                document.getElementById(`gest-${i}`).setAttribute('d', pool[i].gest);
            }

            var c = [
                { dots: dots3, gest: 'M37.5 70v10h20V70M62.5 70v10' },          // • └─•─┘| •
                { dots: dots2, gest: 'M47.5 70v10M52.5 70v10' },                // • || •
                { dots: dots3, gest: 'M37.5 70v10M42.5 70v10h20V70' },          // • |└─•─┘ •
            ][rnd.next(0, 3)];
            document.getElementById('dots-C').setAttribute('d', c.dots);
            document.getElementById('gest-C').setAttribute('d', c.gest);

            var arr = [
                "Первая цифра - координата x, вторая цифра - координата y.",
                "Вторая цифра - координата x, первая цифра - координата y.",
                "Шестой символ - координата x, третий символ - координата y.",
                "Третий символ - координата x, шестой символ - координата y.",
                "Первая цифра - координата x, последняя цифра - координата y.",
                "Последняя цифра - координата x, первая цифра - координата y.",
            ];
            var elem = arr[rnd.next(0, arr.length)];
            document.getElementById('sn-coords').innerText = elem;

            var directions = ["востока", "юга", "запада", "севера"];
            document.getElementById('initial-direction').innerText = directions[rnd.next(0, 4)];

            var rotations = ["против часовой стрелки", "по часовой стрелке"];
            document.getElementById('initial-rotation').innerText = rotations[rnd.next(0, 2)];
            var rotation2 = rotations[rnd.next(0, 2)];
            document.getElementById('rotation-1').innerText = rotation2;
            document.getElementById('rotation-2').innerText = rotation2;

            var widgets = [
                "элементов питания и портов",
                "элементов питания и индикаторов",
                "держателей элементов питания и портов",
                "держателей элементов питания и индикаторов",
                "портов и индикаторов",
                "портов",
                "индикаторов",
                "элементов питания",
                "держателей элементов питания",
            ];
            document.getElementById('rot-widget').innerText = widgets[rnd.next(0, widgets.length)];
        }

        function setDefaultRules(rnd) { setRules(rnd); }
    </script>
    <style>
        ul {
            padding-left: 1em;
        }

        li {
            margin: .8em 0;
        }

        table.grid {
            margin: 3em auto 0;
            font-size: 14pt;
        }

        table.grid col {
            width: 1.2cm;
        }

        table.grid td {
            text-align: center;
        }

        table.grid tr {
            height: 1.2cm;
        }

        .ruleseed-active .seedable {
            font-weight: bold;
            text-decoration: underline;
        }

        span.footnote-marker {
            vertical-align: super;
            font-size: 70%;
        }

        p.footnote {
            font-size: 70%;
        }

        div.footnotes {
            position: relative;
            margin-top: 2em;
            padding-top: 1em;
        }

        div.footnotes:before {
            border-top: 1px solid black;
            left: 0;
            top: 0;
            position: absolute;
            width: 50mm;
            content: '';
        }

    </style>
</head>

<body>
    <div class="section">
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Черная Дыра</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Black Hole.svg" class="diagram">
                <h2>О Черной Дыре</h2>
                <p class="flavour-text">Наземное управление вызывает майора Тома, вы читаете?</p>
                <ul>
                    <li>
                        Чтобы обезвредить все модули "Черная Дыра" на бомбе, получите код, состоящий из цифр 0–4.
                        Длина кода в 7 раз превышает общее количество модулей "Черная Дыра" на одной бомбе.
                        В любой момент вы можете ввести следующую цифру кода на любом нерешенном модуле "Черная дыра".
                    </li>
                    <li>
                        Если вы решите другой модуль на бомбе после ввода цифры кода, код сокращается на две цифры,
                        кроме случаев, когда введенная цифра решила модуль "Черная Дыра".
                        Таким образом, вы можете уменьшить код для одной черной дыры с 7 до 3 цифр, решая другие модули между вводом цифр.
                        Код для двух Черных Дыр можно сократить с 14 до 6 и т.д.
                    </li>
                    <li>
                        Обратите внимание на 10×10 таблицу на следующей странице. Рассчитайте свое стартовое местоположение в этой таблице по серийному номеру бомбы.
                        <span class='seedable' id='sn-coords'>Третий символ - координата x, шестой символ - координата y.</span>
                        Столбцы и строки считаются слева направо / сверху вниз начиная с 0.
                    </li>
                    <li>
                        Чтобы определить ваше первоначальное направление движения, начните с <span class='seedable' id='initial-direction'>севера</span>,
                        затем поверните на 45° <span class='seedable' id='initial-rotation'>по часовой стрелке</span>
                        столько раз, сколько <span class='seedable' id='rot-widget'>портов</span> на бомбе.
                    </li>
                    <li>
                        Получите первую цифру кода из этой клетки таблицы, затем переместитесь на одну клетку в исходном направлении,
                        затем повернитесь на 45° <span class='seedable' id='rotation-1'>по часовой стрелке</span>.
                    </li>
                    <li>
                        Следующая цифра - это сумма по модулю <em>5</em><span class='footnote-marker'>*</span>
                        двух последовательных клеток таблицы в вашем текущем направлении.
                        Получите два числа, переместитесь на одну клетку дальше и поверните на 45° <span class='seedable' id='rotation-2'>по часовой стрелке</span>.
                    </li>
                    <li>
                        Проделайте то же самое для каждой последующей цифры, добавляя каждый раз еще одну клетку таблицы.
                        <var>N</var>-я цифра кода - это сумма (по модулю 5<span class='footnote-marker'>*</span>) <var>n</var> последовательных точек сетки.
                    </li>
                    <li>Каждый раз, когда вы выходите за край таблицы, перейдите на противоположную сторону.</li>
                    <li>На следующей странице объясняется метод ввода каждой цифры.</li>
                    <li>Ввод "C" можно использовать, чтобы определить, сколько правильных цифр уже было введено в случае, если вы потеряли счет.</li>
                </ul>
                <div class='footnotes'>
                    <p class='footnote'><sup>*</sup> "По модулю 5": прибавляйте/вычитайте 5, пока число не окажется в диапазоне 0–4.</p>
                </div>
            </div>
            <div class="page-footer relative-footer">Стр. 1 из 2</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Черная Дыра</span>
            </div>
            <div class="page-content">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox='-2 -2 604 94' font-size="28" font-family="Special Elite" text-anchor="middle">
                    <!-- frame -->
                    <path fill="none" stroke="#000" stroke-width="2" d="M0 40h600v50H0zm100 0v50m100-50v50m100-50v50m100-50v50m100-50v50" />

                    <!-- 0 -->
                    <path id='dots-0' transform='translate(000, 0)'
                        d="M35 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
                    <!-- 0 -->
                    <path id='gest-0' transform='translate(000, 0)' fill="none" stroke="#000" d="M40 70v10h20V70" />
                    <!-- 1 -->
                    <path id='dots-1' transform='translate(100, 0)'
                        d="M35 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
                    <!-- 1 -->
                    <path id='gest-1' transform='translate(100, 0)' fill="none" stroke="#000" d="M40 70v10m20-10v10" />
                    <!-- 2 -->
                    <path id='dots-2' transform='translate(200, 0)'
                        d="M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
                    <!-- 2 -->
                    <path id='gest-2' transform='translate(200, 0)' fill="none" stroke="#000" d="M30 70v10M50 70v10h20V70" />
                    <!-- 3 -->
                    <path id='dots-3' transform='translate(300, 0)'
                        d="M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
                    <!-- 3 -->
                    <path id='gest-3' transform='translate(300, 0)' fill="none" stroke="#000" d="M52.5 70v10H70V70m-40 0v10h17.5V70" />
                    <!-- 4 -->
                    <path id='dots-4' transform='translate(400, 0)'
                        d="M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
                    <!-- 4 -->
                    <path id='gest-4' transform='translate(400, 0)' fill="none" stroke="#000" d="M30 70v10h40V70" />
                    <!-- C -->
                    <path id='dots-C' transform='translate(500, 0)' d="M45 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
                    <!-- C -->
                    <path id='gest-C' transform='translate(500, 0)' fill="none" stroke="#000" d="M47.5 70v10M52.5 70v10" />

                    <text x="50" y="30">
                        <tspan x="50" y="30" fill="#000" stroke="none">0</tspan>
                    </text>
                    <text x="250" y="30">
                        <tspan x="250" y="30" fill="#000" stroke="none">2</tspan>
                    </text>
                    <text x="150" y="30">
                        <tspan x="150" y="30" fill="#000" stroke="none">1</tspan>
                    </text>
                    <text x="350" y="30">
                        <tspan x="350" y="30" fill="#000" stroke="none">3</tspan>
                    </text>
                    <text x="450" y="30">
                        <tspan x="450" y="30" fill="#000" stroke="none">4</tspan>
                    </text>
                    <text x="550" y="30">
                        <tspan x="550" y="30" fill="#000" stroke="none">C</tspan>
                    </text>
                </svg>
                <ul>
                    <li>На приведенных выше диаграммах точка представляет собой отсчет таймера бомбы (т.е. изменение значения секунд), идущий слева направо.</li>
                    <li>Вертикальная линия обозначает нажатие на модуль. Убедитесь, что вы нажимаете и отпускаете модуль между двумя отметками.</li>
                    <li>Скобка указывает на то, что модуль нужно удерживать в течении одной или нескольких отсчетов таймера.</li>
                </ul>
                <table class='grid'>
                    <colgroup>
                        <col>
                        <col>
                        <col>
                        <col>
                        <col>
                        <col>
                        <col>
                        <col>
                        <col>
                        <col>
                    </colgroup>
                    <tr>
                        <td>3</td>
                        <td>4</td>
                        <td>1</td>
                        <td>0</td>
                        <td>2</td>
                        <td>3</td>
                        <td>1</td>
                        <td>2</td>
                        <td>0</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>3</td>
                        <td>0</td>
                        <td>2</td>
                        <td>4</td>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>2</td>
                        <td>4</td>
                        <td>2</td>
                        <td>1</td>
                        <td>3</td>
                        <td>0</td>
                        <td>0</td>
                        <td>1</td>
                        <td>4</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>0</td>
                        <td>0</td>
                        <td>1</td>
                        <td>3</td>
                        <td>4</td>
                        <td>2</td>
                        <td>2</td>
                        <td>1</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>1</td>
                        <td>3</td>
                        <td>0</td>
                        <td>0</td>
                        <td>4</td>
                        <td>3</td>
                        <td>4</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>0</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td>1</td>
                        <td>3</td>
                        <td>0</td>
                        <td>2</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>1</td>
                        <td>3</td>
                        <td>1</td>
                        <td>3</td>
                        <td>0</td>
                        <td>4</td>
                        <td>4</td>
                        <td>0</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>4</td>
                        <td>4</td>
                        <td>0</td>
                        <td>0</td>
                        <td>2</td>
                        <td>1</td>
                        <td>1</td>
                        <td>3</td>
                        <td>3</td>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>1</td>
                        <td>3</td>
                        <td>4</td>
                        <td>2</td>
                        <td>2</td>
                        <td>0</td>
                        <td>4</td>
                        <td>3</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td>3</td>
                        <td>2</td>
                        <td>4</td>
                        <td>1</td>
                        <td>4</td>
                        <td>3</td>
                        <td>1</td>
                        <td>2</td>
                        <td>0</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Стр. 2 из 2</div>
        </div>
    </div>
</body>

</html>
